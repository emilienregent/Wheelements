window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b,f){window.setTimeout(b,25)}}());function C(b,f,k,h,e,g){0<e&&(CS(b,0<g?"rgba(0,0,0,.1)":f,k,h,e,g),b.fillStyle=f,b.fill())}function CS(b,f,k,h,e,g){b.beginPath();b.arc(k,h,e,0,2*Math.PI);b.lineWidth=g;b.closePath();b.strokeStyle=f;b.stroke()}
function A(b,f,k,h,e,g,m,l){b.beginPath();b.arc(k,h,e,Math.PI/180*m,Math.PI/180*l,!1);b.lineWidth=g;b.strokeStyle=f;b.stroke();b.closePath()}function R(b,f,k,h,e,g){b.fillStyle=f;b.fillRect(k,h,e,g)}function L(b,f,k,h){b.beginPath();b.moveTo(k.x,k.y);b.lineTo(h.x,h.y);b.strokeStyle=f;b.stroke()}
function S(b,f,k,h,e,g,m){b.save();b.beginPath();b.translate(f,k);b.fillStyle=m;b.moveTo(0,0-h);for(f=0;f<e;f++)b.rotate(Math.PI/e),b.lineTo(0,0-h*g),b.rotate(Math.PI/e),b.lineTo(0,0-h);b.fill();b.restore()}function T(b,f,k,h,e,g){b.fillStyle=k;b.font=g+"pt Arial";b.fillText(f,h,e)}function ucfirst(b){return b.charAt(0).toUpperCase()+b.slice(1)}
function isWebkit(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)||/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)}function isMoz(){return-1<navigator.userAgent.toLowerCase().indexOf("firefox")}function rand(b,f){return Math.random()*(f-b)+b}function randI(b,f){return Math.floor(Math.random()*(f-b+1))+b}function distance(b,f){return Math.sqrt((b.x-f.x)*(b.x-f.x)+(b.y-f.y)*(b.y-f.y))}function rad(b){return Math.PI/180*b}
function deg(b){return 180/Math.PI*b}window.countFPS=function(){var b=(new Date).getMilliseconds(),f=1,k=0;return function(){var h=(new Date).getMilliseconds();b>h?(k=f,f=1):f+=1;b=h;return k}}();cc="rgb(0,0,0) rgb(255,255,255) rgba(0,128,255,1) rgba(255,127,0,1) rgba(196,226,255,1) rgba(160,82,45,1) rgb(255,0,255) rgb(51,51,51) rgb(120,120,120) rgb(247,251,255) rgb(244,164,96) rgb(247,185,133) rgba(221,0,72,1)".split(" ");
var Input=function(){this.space=this.left=this.down=this.right=this.up=0;var b=this;document.addEventListener("keydown",function(f){b.up=38==f.keyCode||90==f.keyCode||87==f.keyCode?1:b.up;b.right=39==f.keyCode||68==f.keyCode?1:b.right;b.down=40==f.keyCode||83==f.keyCode?1:b.down;b.left=37==f.keyCode||81==f.keyCode||65==f.keyCode?1:b.left;b.space=32==f.keyCode?1:b.space},!1);document.addEventListener("keyup",function(f){b.keypressed=!0;b.up=38==f.keyCode||90==f.keyCode||87==f.keyCode?0:b.up;b.right=
39==f.keyCode||68==f.keyCode?0:b.right;b.down=40==f.keyCode||83==f.keyCode?0:b.down;b.left=37==f.keyCode||81==f.keyCode||65==f.keyCode?0:b.left;b.space=32==f.keyCode?0:b.space},!1);this.keyboardEventsSet=!0},Game=function(){window.game=this;this.input=new Input;this.player=new Player;this.player.initialize();this.elapsedTime=0;this.time=this.lTime=this.pTime=+new Date;this.pRate=3;this.fpsUnderLimit=this.maxFps=this.fps=0;this.quality="high";this.hasQualitySetting=!0;this.foes=[];this.canRestart=
this.gameover=!1;this.evtRestart=null;this.score=this.kills=this.mix=0;this.bestScore=Math.max(localStorage.getItem("score"),0);this.messages="Protect the life element from red dots !;Turn the wheel of powers with [left-arrow] and [right-arrow].;Use [space] to unleash powers and mix elements !!;Prepare yourself ...;Red dot is coming !;Game Over - Clic to restart".split(";");this.step=0;this.run=function(){this.fps=countFPS();this.hasQualitySetting&&"high"==this.quality&&(this.fps<this.maxFps/2&&this.fpsUnderLimit++,
10<this.fpsUnderLimit&&(this.quality="low"));this.time=+new Date;1E3<=this.time-this.lTime&&!1===this.gameover&&(this.elapsedTime++,this.lTime=this.time,0===this.elapsedTime%this.pRate&&(this.pTime=this.time,this.step==this.messages.length-2?this.foes.push(new Foe):this.step++),this.fps>this.maxFps&&(this.maxFps=this.fps));R(ctx,cc[7],0,0,canvas.width,canvas.height);if(!1===this.gameover)for(i=0,c=this.foes.length;i<c;i++)if(0==this.foes[i].toDelete)this.foes[i].update();else{if(this.kills++,this.foes.splice(i,
1),0>=--c)break}else this.step==this.messages.length-2&&(this.step++,this.score>this.bestScore&&localStorage.setItem("score",this.score));this.player.update();var b=this.messages[this.step];R(ctx,"rgba(25,25,25,0.5)",0,canvas.height-80,this.gameover?canvas.width:(this.time-this.pTime)*canvas.width/(1E3*this.pRate),40);T(ctx,b,cc[7],50,canvas.height-50,20);!1===this.canRestart&&!0===this.gameover&&(this.canRestart=!0,this.evtRestart=canvas.addEventListener("click",this.restart.bind(this)));this.step==
this.messages.length-2&&(this.score=this.elapsedTime*(5-this.player.cPowers)+(this.kills+this.mix*this.mix));T(ctx,"Score : "+this.score,cc[1],50,50,20);T(ctx,"Best Score : "+this.bestScore,"rgba(255,255,255,.5)",50,75,20);requestAnimationFrame(this.run.bind(this))};this.restart=function(){this.step=this.messages.length-2;this.elapsedTime=this.mix=this.kills=0;this.gameover=this.canRestart=!1;this.pTime=this.time;i=0;for(c=this.foes.length;i<c&&!(this.foes.splice(i,1),0>=--c);i++);i=0;for(c=this.player.powers.length;i<
c;i++){var b=this.player.powers[i];b.toDelete=!1;b.projectiles.splice(0,b.projectiles.length)}this.foes=[];canvas.removeEventListener("click",this.evtRestart,!1)};this.run()},Power=function(b){this.type=b;this.name=PowerConf.names[b];this.color=PowerConf.colors[b];this.cd=PowerConf.cd[b];this.rof=PowerConf.rofs[b];this.angle=PowerConf.angles[b];this.projectiles=[];this.y=this.x=0;this.r=game.player.r/4;this.lastShoot=+new Date;this.toDelete=!1;this.update=function(){var b=rad(game.player.offset);
this.x=game.player.x+Math.cos(this.angle+b)*game.player.r;this.y=game.player.y+Math.sin(this.angle+b)*game.player.r;1<game.step&&1===game.input.space&&game.time-this.lastShoot>=this.rof&&!1===game.gameover&&(this.lastShoot=game.time,this.projectiles.push(new (window["Projectile"+ucfirst(PowerConf.names[this.type])])(this.type)));for(var b=0,k=this.projectiles.length;b<k;b++)if(0==this.projectiles[b].toDelete)0>game.time-this.projectiles[b].time||1!==b?this.projectiles[b].update():this.projectiles[b].destroy();
else if(this.projectiles.splice(b,1),0>=--k)break};this.render=function(){C(ctx,this.cd,this.x,this.y,this.r,1);A(ctx,this.color,this.x,this.y,this.r,3,0,360*(game.time-this.lastShoot)/this.rof);for(var b=0,k=this.projectiles.length;b<k;b++)this.projectiles[b].render()};this.destroy=function(){this.toDelete=!0}},PowerConf={names:["air","water","fire","earth"],times:[1E4,1E4,6E3,3E3],speed:[1,.1,0,3],colors:[cc[4],cc[2],cc[3],cc[5]],angles:[0,Math.PI/2*3,Math.PI/2,Math.PI],rofs:[2E3,250,2E3,1E3],cd:["rgba(196,226,255,0.8)",
"rgba(0,128,255,0.8)","rgba(255,127,0,0.8)","rgba(160,82,45,0.8)"]},Projectile={update:function(){this.x+=5*Math.cos(this.angle);this.y+=5*Math.sin(this.angle);for(i=0;i<game.foes.length;i++){var b=game.foes[i];if(distance(this,b)<this.r){b.destroy();this.destroy();break}}},render:function(){C(ctx,this.color,this.x,this.y,this.r,1)},destroy:function(){this.toDelete=!0}},ProjectileAir=function(b){this.angle=game.player.powers[b].angle+game.player.offset*Math.PI/180;this.x=game.player.powers[b].x+game.player.r*
Math.cos(this.angle);this.y=game.player.powers[b].y+game.player.r*Math.sin(this.angle);this.r=20;this.name=PowerConf.names[b];this.color=PowerConf.colors[b];this.parts=[{x:this.x-50*Math.cos(this.angle+rad(45)),y:this.y-50*Math.sin(this.angle+rad(45)),p:[]},{x:this.x-25*Math.cos(this.angle+rad(30)),y:this.y-25*Math.sin(this.angle+rad(30)),p:[]},{x:this.x-25*Math.cos(this.angle-rad(30)),y:this.y-25*Math.sin(this.angle-rad(30)),p:[]},{x:this.x-50*Math.cos(this.angle-rad(45)),y:this.y-50*Math.sin(this.angle-
rad(45)),p:[]}];this.s=PowerConf.speed[b];this.maxl=5;this.time=game.time+PowerConf.times[b];this.fired=this.toDelete=!1;this.update=function(){for(var b=0,k=this.parts.length;b<k;b++){var h=this.parts[b];h.x+=Math.cos(this.angle)*this.s;h.y+=Math.sin(this.angle)*this.s;for(var e=0;e<game.foes.length;e++){var g=game.foes[e];distance(h,g)<this.r+g.r&&(this.fired?(game.mix++,g.destroy()):g.slowdown(g.s))}if(1==this.fired)for(e=0;e<k;e++)h.p.push({x:this.r/2*Math.cos(this.r+(this.time-game.time)/50)+
h.x,y:this.r/2*Math.sin(this.r+(this.time-game.time)/50)+h.y,xs:(2*Math.random()*this.s-this.s)/2,ys:2*-Math.random()*this.s,l:0});else for(e=0;e<game.player.powers[2].projectiles.length;e++)if(g=game.player.powers[2].projectiles[e],0==g.smoked)for(var m=0;m<g.parts.length;m++){var l=g.parts[m];if(distance(l,h)<l.r+this.r/2){this.fired=!0;break}}}};this.render=function(){for(var b=0,k=this.parts.length;b<k;b++)if("high"==game.quality){ctx.moveTo(this.x,this.y);ctx.lineWidth=2;ctx.beginPath();for(h=
this.r/2;h<2*this.r;h++)a=.5*h,x=a/2*Math.cos(a+(this.time-game.time)/50)+this.parts[b].x,y=a/2*Math.sin(a+(this.time-game.time)/50)+this.parts[b].y,ctx.lineTo(x,y);ctx.closePath();this.fired&&(ctx.fillStyle=cc[3],ctx.fill());ctx.strokeStyle=cc[4];ctx.stroke();for(var h=0;h<this.parts[b].p.length;h++){var e=this.parts[b].p[h],g=this.maxl,m="rgba("+(260-2*e.l)+","+(2*e.l+127)+","+2*e.l+","+(g-e.l)/g*.4+")";C(ctx,m,e.x,e.y,(g-e.l)/g+1);e.x+=e.xs;e.y+=e.ys;e.l++;e.l>=g&&(this.parts[b].p.splice(h,1),
h--)}}else m=this.fired?cc[3]:this.color,C(ctx,m,this.parts[b].x,this.parts[b].y,this.r/2)}};ProjectileAir.prototype=Projectile;
var ProjectileEarth=function(b){this.x=game.player.powers[b].x;this.y=game.player.powers[b].y;this.r=5;this.type=b;this.name=PowerConf.names[b];this.color=PowerConf.colors[b];this.angle=game.player.powers[b].angle+game.player.offset*Math.PI/180;this.speed=PowerConf.speed[b];this.exploded=this.splited=this.fired=!1;this.time=game.time+PowerConf.times[b];this.toDelete=!1;this.parts=[];for(var f=b=this.offset=0;8>f;f++)this.parts[f]={a:b,p:[],s:3,maxl:4},b+=360/(8*rand(0,1));this.update=function(){this.x+=
Math.cos(this.angle)*this.speed;this.y+=Math.sin(this.angle)*this.speed;this.offset+=5;for(e=0;e<game.foes.length;e++){var b=game.foes[e];if(distance(this,b)<b.r+this.r){if(this.r>=b.r/4&&(b.destroy(),1==this.fired&&0==this.exploded)){game.mix++;this.explode();break}0==this.exploded&&this.destroy();break}}if(0==this.exploded&&0==this.splited)for(b=0;b<game.player.powers[0].projectiles.length;b++)for(var h=game.player.powers[0].projectiles[b],e=0;e<h.parts.length;e++)if(distance(this,h.parts[e])<this.r+
h.r){this.split(h);h.destroy();break}if(0==this.fired&&0==this.exploded)for(b=0;b<game.player.powers[2].projectiles.length;b++){if(h=game.player.powers[2].projectiles[b],0==h.smoked)for(e=0;e<h.parts.length;e++)distance(this,h.parts[e])<this.r+h.r&&(this.fired=!0)}else 1==this.fired&&1==this.exploded&&this.r++;for(b=0;b<game.player.powers[1].projectiles.length;b++)for(h=game.player.powers[1].projectiles[b],e=0;e<h.parts.length;e++){var g=h.parts[e];distance(this,g)<this.r+g.r&&(1==this.fired?this.fired=
!1:0==g.mud&&0==g.iced&&(g.mud=!0,g.r*=2,g.time=game.time+PowerConf.times[1],0>=--this.r&&this.destroy()))}if(1==this.fired&&"high"==game.quality)for(b=0;b<this.parts.length;b++)for(var h=this.parts[b],g=this.x+Math.cos(rad(this.parts[b].a+this.offset))*this.r,f=this.y+Math.sin(rad(this.parts[b].a+this.offset))*this.r,e=0;1>e;e++){var l={x:g,y:f,xs:(2*Math.random()*h.s-h.s)/2,ys:2*-Math.random()*h.s,l:0};h.p.push(l)}};this.render=function(){this.p=randI(10,20);this.m=rand(.5,.51);if(0==this.exploded)for(var b=
0;b<this.parts.length;b++){var h=this.x+Math.cos(rad(this.parts[b].a+this.offset))*this.r,e=this.y+Math.sin(rad(this.parts[b].a+this.offset))*this.r,g=this.fired?PowerConf.colors[2]:this.color;C(ctx,g,h,e,this.r/3);if("high"==game.quality)for(h=0;h<this.parts[b].p.length;h++)e=this.parts[b].p[h],g=this.parts[b].maxl,C(ctx,"rgba("+(260-2*e.l)+","+(2*e.l+127)+","+2*e.l+","+(g-e.l)/g*.4+")",e.x,e.y,(g-e.l)/g*(this.r/6)+this.r/6),e.x+=e.xs,e.y+=e.ys,e.l++,e.l>=g&&(this.parts[b].p.splice(h,1),h--)}C(ctx,
this.color,this.x,this.y,this.r);this.exploded&&(g=cc[12].replace(",1)",",.5)"),C(ctx,g,this.x,this.y,this.r/2))};this.explode=function(){this.color=PowerConf.colors[2];this.speed=0;this.exploded=!0};this.split=function(b){this.splited=!0;for(var h=0;h<b.parts.length;h++){var e=new ProjectileEarth(this.type);e.x=b.parts[h].x;e.y=b.parts[h].y;game.player.powers[this.type].projectiles.push(e)}this.destroy()}};ProjectileEarth.prototype=Projectile;
var ProjectileFire=function(b){this.angle=game.player.powers[b].angle+rad(game.player.offset);this.x=game.player.powers[b].x+game.player.r*Math.cos(this.angle);this.y=game.player.powers[b].y+game.player.r*Math.sin(this.angle);this.r=3;this.parts=[];for(var f=0;8>f;f++){var k=4>f?1:-1;this.parts[f]={x:this.x+50*Math.cos(this.angle+rad(f%4*15)*k),y:this.y+50*Math.sin(this.angle+rad(f%4*15)*k),p:[],s:3,maxl:10,r:this.r/2}}this.name=PowerConf.names[b];this.color=PowerConf.colors[b];this.time=game.time+
PowerConf.times[b];this.smoked=this.toDelete=!1;this.update=function(){for(f=0;f<this.parts.length;f++){var b=this.parts[f];for(j=0;j<game.foes.length;j++){var e=game.foes[j];if(distance(b,e)<e.r){this.smoked?e.reverse():e.destroy();break}}if("high"==game.quality)for(e=this.smoked?randI(-5,2):1,j=0;j<e;j++){var g={x:b.x,y:b.y,xs:(2*Math.random()*b.s-b.s)/2,ys:2*-Math.random()*b.s,l:0};this.smoked&&(g.xs/=2,g.ys/=2);b.p.push(g)}}};this.render=function(){for(var b=0;b<this.parts.length;b++)if("high"==
game.quality)for(var e=0;e<this.parts[b].p.length;e++){var g=this.parts[b].p[e],f=this.parts[b].maxl;C(ctx,this.smoked?"rgba("+(120-2*g.l)+","+(120-2*g.l)+","+(120-2*g.l)+","+(f-g.l)/f*.4+")":"rgba("+(260-2*g.l)+","+(2*g.l+127)+","+2*g.l+","+(f-g.l)/f*.4+")",g.x,g.y,(f-g.l)/f*(this.r/2)+this.r/2);g.x+=g.xs;g.y+=g.ys;g.l++;g.l>=f&&(this.parts[b].p.splice(e,1),e--)}else C(ctx,this.smoked?cc[8]:this.color,this.parts[b].x,this.parts[b].y,this.r)};this.smoke=function(){this.smoked=!0;for(var b=0;b<this.parts.length;b++)this.parts[b].maxl=
30}};ProjectileFire.prototype=Projectile;
var ProjectileWater=function(b){this.x=game.player.powers[b].x;this.y=game.player.powers[b].y;this.r=3;this.name=PowerConf.names[b];this.color=PowerConf.colors[b];this.angle=game.player.powers[b].angle+game.player.offset*Math.PI/180;this.speed=PowerConf.speed[b];this.iced=!1;this.parts=[];for(var f=0;10>f;f++)this.parts[f]={x:this.x+Math.cos(this.angle+rad(45))*randI(-this.r,3*this.r),y:this.y+Math.sin(this.angle+rad(45))*randI(-this.r,3*this.r),sx:rand(this.speed,this.speed+1),sy:rand(this.speed,
this.speed+1),r:rand(this.r/2,2*this.r),time:game.time+PowerConf.times[b]+rand(0,1E3),iced:!1,mud:!1};this.time=game.time+PowerConf.times[b];this.toDelete=!1;this.update=function(){for(var b=0,f=this.parts.length;b<f;b++){var e=this.parts[b];if(0<game.time-e.time)this.parts.splice(b,1),f--;else{if(0==e.mud){e.x+=Math.cos(this.angle)*e.sx;e.y+=Math.sin(this.angle)*e.sy;for(var g=0;g<game.player.powers[0].projectiles.length;g++)for(var m=game.player.powers[0].projectiles[g],l=0;l<m.parts.length;l++)distance(e,
m.parts[l])<e.r+m.r&&(e.iced=!0);for(g=0;g<game.player.powers[2].projectiles.length;g++)for(m=game.player.powers[2].projectiles[g],l=0;l<m.parts.length;l++)if(distance(m.parts[l],e)<e.r+m.r){m.smoke();this.parts.splice(b,1);f--;break}}for(g=0;g<game.foes.length;g++)if(l=game.foes[g],distance(e,l)<e.r+l.r){e.iced?l.freeze():e.mud?l.slowdown(l.s/2):l.slowdown(e.r/1E4);this.parts.splice(b,1);return}if(0>=f)break}}};this.render=function(){for(var b=0,f=this.parts.length;b<f;b++){var e=this.parts[b];e.iced?
(S(ctx,e.x,e.y,7,5,.5,cc[2]),S(ctx,e.x,e.y,7,10,.3,cc[9])):C(ctx,e.mud?cc[10]:this.color,e.x,e.y,e.r,0);if(e.mud&&"high"==game.quality){ctx.moveTo(e.x,e.y);ctx.lineWidth=1;ctx.beginPath();for(j=e.r/2;j<4*e.r;j++)a=.5*j,x=a/2*Math.cos(a+(e.time-game.time)/50)+e.x,y=a/2*Math.sin(a+(e.time-game.time)/50)+e.y,ctx.lineTo(x,y);ctx.closePath();ctx.strokeStyle=cc[11];ctx.stroke()}}}};ProjectileWater.prototype=Projectile;
var Player=function(){this.x=canvas.width/2;this.y=canvas.height/2;this.r=40;this.offset=0;this.angularSpeed=.25;this.powers=[];this.cPowers=3;this.alpha=0;this.coef=.01;this.initialize=function(){for(i=0;4>i;i++)this.powers[i]=new Power(i)};this.update=function(){if(0<game.step){1===game.input.left?(this.angularSpeed=Math.min(this.angularSpeed+.1,10),this.offset=(this.offset+this.angularSpeed)%360):1===game.input.right?(this.angularSpeed=Math.min(this.angularSpeed+.1,10),this.offset=(this.offset-
this.angularSpeed)%360):this.angularSpeed=.25;for(var b=this.cPowers=0,f=this.powers.length;b<f;b++)0==this.powers[b].toDelete&&(this.powers[b].update(),this.cPowers++)}this.alpha+=this.coef;1<=this.alpha&&0<this.coef?(this.coef=-this.coef,this.alpha=1):.1>=this.alpha&&0>this.coef&&(this.coef=-this.coef,this.alpha=.1);this.render()};this.render=function(){C(ctx,"rgba(255,255,255,.3",this.x,this.y,this.r,1);if(0==game.gameover&&0<game.step){for(var b=0,f=this.powers.length;b<f;b++){var k=this.powers[b].toDelete?
cc[1]:this.powers[b].color,h=deg(PowerConf.angles[b]);A(ctx,k,this.x,this.y,this.r,3,h-45+this.offset,h+45+this.offset)}b=0;for(f=this.powers.length;b<f;b++)0==this.powers[b].toDelete&&this.powers[b].render()}k=game.gameover?"rgba(221,0,72,"+this.alpha+")":"rgba(131,245,44,"+this.alpha+")";C(ctx,k,this.x,this.y,this.r/4)}},Foe=function(){a=randI(0,359);this.x=game.player.x+.5*canvas.width*Math.cos(a);this.y=game.player.y+.5*canvas.height*Math.sin(a);this.r=rand(10,20);this.s=rand(.0015,.0055);this.c=
cc[12];this.f=!1;this.ft=null;this.reversed=this.toDelete=!1;this.update=function(){this.f&&2E3<game.time-this.ft&&this.unfreeze();x=game.player.x-this.x;y=game.player.y-this.y;d=Math.sqrt(x*x+y*y);1<d&&(this.reversed?(this.x-=this.s/10*x,this.y-=this.s/10*y):(this.x+=this.s/10*x,this.y+=this.s/10*y),this.f||(this.s+=5E-5));if(distance(this,game.player)<game.player.r/4+this.r)this.destroy(),game.gameover=!0;else for(var b=0,f=game.player.powers.length;b<f;b++){var k=game.player.powers[b];if(!1===
k.toDelete&&distance(k,this)<2*k.r+this.r){k.destroy();this.destroy();break}}1==this.reversed&&(0>this.x||this.x>canvas.width||0>this.y||this.y>canvas.height)&&this.reverse();this.render()};this.render=function(){C(ctx,this.c,this.x,this.y,this.r,1)};this.destroy=function(){this.toDelete=!0};this.knockback=function(b){x=game.player.x-this.x;y=game.player.y-this.y;this.s-=5E-4;d=Math.sqrt(x*x+y*y);1<d&&(this.x-=x*this.s*b,this.y-=y*this.s*b)};this.slowdown=function(b){this.s-=b};this.freeze=function(){this.c=
cc[2];this.f=!0;this.s=0;this.ft=+new Date};this.unfreeze=function(){this.c=cc[12];this.f=!1;this.ft=null};this.reverse=function(){this.c=(this.reversed=!this.reversed)?cc[8]:cc[12]}};